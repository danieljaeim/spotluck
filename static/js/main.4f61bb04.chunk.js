(this.webpackJsonpspotily=this.webpackJsonpspotily||[]).push([[0],{28:function(e,t,a){},38:function(e,t,a){},43:function(e,t,a){e.exports=a(89)},48:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(40),s=a.n(c),i=(a(48),a(1)),o=a.n(i),l=a(3),u=a(5),p=a(6),m=a(8),d=a(7),f=(a(28),a(22)),h=a(2),v=a(41),k=a.n(v),g=a(17),y=a(19),b=a(26),E=a(23),T=a(9),S=a.n(T),w=(a(38),a(79),["330036","38182F","330036","8D0101","FE0B0B","FCA122","FDCC86"]),N=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.tracks,a=e.newartisttracks,r=(e.token,e.sortByNew),c=e.updateSortByNew,s=e.queueUpSongs,i=e.updateMenu,o=e.callForRecommend,l=e.playSpecificSong,u=e.updateHoveredObj,p=e.lockSpecificTrack,m=e.select,d=(e.hoverIndex,r?a:t);return n.a.createElement("span",{className:"thumbnail-container"},n.a.createElement("div",{className:"tracklist"},d?d.map((function(e,t){return n.a.createElement("div",{className:"track-style",key:t,"data-sample-uri":e.preview_url,onMouseLeave:function(e){return u(null)},onMouseEnter:function(e){return u(e,t)}},n.a.createElement("div",{className:"name_artist_container"},n.a.createElement("div",{className:"img-hover",onClick:function(){return l(e.uri,e.name)}},n.a.createElement("div",{className:"play-circle"})),n.a.createElement("img",{className:"imageStyle",onClick:function(){return l(e.uri,e.name)},alt:"",src:"".concat(e.album.images[2].url)}),n.a.createElement("span",{className:"underline-area",style:{borderTop:t>0?m[t-1]?"1px #E36588 solid":"1px #82A6B1 solid":"none"}},n.a.createElement("h4",{className:"track_name"},-1===e.name.indexOf("(")?e.name:e.name.slice(0,e.name.indexOf("("))," "),n.a.createElement("span",{className:"artist_name"},e.artists[0].name),n.a.createElement("span",{className:"track-popularity"},new Array(Math.ceil((e.popularity/10).toFixed(2))).fill(0).map((function(e,t){return n.a.createElement("span",{className:"fill-up-popularity",style:{backgroundColor:"#"+w[t]}})}))))),n.a.createElement("span",{className:"bookmark-button",onClick:function(){return p(t)}},m[t]?n.a.createElement("i",{class:"fa lock-button fa-lock fa-2x","aria-hidden":"true"}):null,m[t]?null:n.a.createElement("i",{class:"fa lock-button fa-unlock fa-2x","aria-hidden":"true"})))})):null),n.a.createElement("div",{className:"tracks-edit"},n.a.createElement("div",{className:"add-playlist-button"}),n.a.createElement("div",{className:"refresh-tracks-button",onClick:function(e){return o()}},n.a.createElement("div",{class:"refresh","aria-hidden":"true"})),n.a.createElement("div",{className:"play-playlist-button",onClick:function(e){return s()}},n.a.createElement("div",{class:"play-circle-o","aria-hidden":"true"})),n.a.createElement("div",{className:"return-button",onClick:function(e){return s()}},n.a.createElement("div",{class:"return",onClick:function(e){return i()},"aria-hidden":"true"})),n.a.createElement("div",{className:"edit-settings"},n.a.createElement("span",{className:"check-new-artists"},n.a.createElement("div",{className:"new-artist",onClick:function(e){return c()}},r?n.a.createElement("div",{className:"check-square","aria-hidden":"true"}):n.a.createElement("div",{className:"times-circle","aria-hidden":"true"})),n.a.createElement("span",{className:"new-artist-label"}," Prioritize new artists ")))))}}]),a}(r.Component),x=(a(80),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).updateSearchTerm=function(e){var t=e.target.value;if(r.setState({currentSearchTerm:t}),clearTimeout(r.state.timer),""!==t&&t!==r.state.currentSearchTerm){var a=r.setTimerToCallApi();r.setState({timer:a})}},r.setTimerToCallApi=function(){return setTimeout(Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.state.currentSearchTerm,e.next=3,r.searchForSpecificQuery(t);case 3:case"end":return e.stop()}}),e)}))),1e3)},r.searchForSpecificQuery=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=encodeURIComponent(t),e.next=3,S.a.get("https://api.spotify.com/v1/search?q=".concat(t,"&type=artist,track,album"),{headers:{Authorization:"Bearer "+r.props.token,"Content-Type":"application/json"}});case 3:a=e.sent,(n=a.data).artists&&(n.artists.items.filter((function(e){return e.images[0]})),n.artists.items.sort((function(e,t){return t.popularity-e.popularity}))),c={},n.albums&&(s=n.albums.items.filter((function(e){return"single"!==e.album_type&&(!c[e.name]&&(c[e.name]=!0,!0))})),n.albums.items=s),r.setState({data:n,lengthOfArtistsFound:n.artists.items.length});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.state={showSearchModal:!1,currentSearchTerm:"",alreadyMoved:!1,timer:null,data:null,width:0,height:0,endChosenModal:!1,openedSearch:!1,lengthOfArtistsFound:20,showingData:!1,swappingArtistHover:!1,arrows:!0,nextArrow:null,prevArrow:null},r}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.preferences,r=t.changingPreferenceIndex,c=t.playSpecificArtist,s=t.updateMenu,i=t.updatePreference,o=t.setupPreference,l=t.currentRelatedArtists,u=(t.openingMenu,this.state),p=u.data,m=(u.lengthOfArtistsFound,u.showingData),d=a[0]||a[1]||a[2]||a[3]||a[4];return n.a.createElement("div",{className:"chosen-container"},n.a.createElement("div",{className:"info-div",style:{paddingTop:r?"none":"60px"}},null==r?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"info-span"}," Here are some artists you enjoy.",n.a.createElement("span",{className:"spotify-text"}," ")," ",n.a.createElement("br",null),n.a.createElement("span",null," ",n.a.createElement("span",{style:{color:"#E36588"}}," Click "),"and ",n.a.createElement("span",{style:{color:"sandybrown"}}," swap "),"out artists."))):null),n.a.createElement("div",{className:"artist-image-list",style:{top:null!==r?"-5vh":"30vh"}},d?[0,1,2,3,4].map((function(t,c){return n.a.createElement("span",{key:a[c].data.id,className:"artist-box-container \n                            ".concat(r===t&&e.props.openingMenu?"move-into-place-anim":"move-out-of-way-anim"),style:{left:"".concat(24*c-3,"%"),background:null!==r?"linear-gradient(90deg, rgba(255,184,92,1) 0%, rgba(227,101,136,1) 75%)":"",animationDelay:null===r?325*Math.abs(2-c)+"ms":null}},a[t]?n.a.createElement("span",{key:a[t].name,onClick:function(e){return o(t)}},e.state.swappingArtistHover&&t===r?n.a.createElement("div",{class:"arrow-circle-down","aria-hidden":"true"}):null,n.a.createElement("img",{className:"artist-image-ins",style:{backgroundImage:"cover"},src:"artist"===a[t].type?a[t].data.images[2].url:a[t].data.album.images[2].url,alt:""}),n.a.createElement("span",{className:"artist-image-name",style:{top:r===t?"120%":""}}," ",a[t].data.name," ")):n.a.createElement("i",{className:"fa fa-plus-square fa-5x","aria-hidden":"true"}))})):null),null!==l?n.a.createElement("div",{className:"related-search-container"},n.a.createElement("div",{className:"search-modal"},n.a.createElement("div",{className:"intro-search-modal"},n.a.createElement("div",{className:"add-button-intro"}),n.a.createElement("input",{onChange:function(t){t.preventDefault(),e.updateSearchTerm(t)},onFocus:function(t){t.preventDefault(),e.setState({showingData:!0})},className:"add-text-intro",id:"input-text",value:this.state.currentSearchTerm,placeholder:"Search for an artist"}),this.state.showingData&&this.state.currentSearchTerm?n.a.createElement("div",{className:"cancel-times",onClick:function(t){t.preventDefault(),document.getElementById("input-text").value="",e.setState({showingData:!1,currentSearchTerm:"",data:null})}}):null),n.a.createElement("div",{className:"search-button-modal"},n.a.createElement("div",{className:"generate-button ".concat(null!==r?"move-button-down-anim":""),onClick:function(){return s()}},"Generate Playlist"))),n.a.createElement("div",{className:"related-artist-modal"},n.a.createElement(n.a.Fragment,null,null!==p&&m?p.artists.items.map((function(t,a){return t.images[0]?n.a.createElement("div",{key:t.id,className:"related-artist"},n.a.createElement("div",{onMouseOver:function(t){e.setState({swappingArtistHover:!0})},onMouseLeave:function(t){e.setState({swappingArtistHover:!1})},className:"replace-div"},n.a.createElement("span",{className:"swap-side",onClick:function(e){e.preventDefault(),i(t,"artist")}},n.a.createElement("div",{className:"arrow-circle-up",onClick:function(e){e.preventDefault(),i(t,"artist")},"aria-hidden":"true"})),n.a.createElement("span",{className:"play-side",onClick:function(e){e.preventDefault(),c(t.uri,t.name)}},n.a.createElement("div",{className:"play-inner",style:{color:"white"},onClick:function(e){e.preventDefault(),c(t.uri,t.name)},"aria-hidden":"true"}))),n.a.createElement("img",{className:"related-artist-img",src:t.images[0].url,alt:""}),n.a.createElement("div",{className:"related-artist-name"},t.name)):null})):l.map((function(t,a){return n.a.createElement("div",{key:t.id,className:"related-artist"},n.a.createElement("div",{className:"replace-div"},n.a.createElement("span",{className:"swap-side",onMouseOver:function(t){e.setState({swappingArtistHover:!0})},onMouseLeave:function(t){e.setState({swappingArtistHover:!1})},onClick:function(e){e.preventDefault(),i(t,"artist")}},n.a.createElement("div",{className:"arrow-circle-up",onClick:function(e){e.preventDefault(),i(t,"artist")},"aria-hidden":"true"})),n.a.createElement("span",{className:"play-side",onClick:function(e){e.preventDefault(),c(t.uri,t.name)}},n.a.createElement("div",{className:"play-inner",onClick:function(e){e.preventDefault(),c(t.uri,t.name)},"aria-hidden":"true"}))),n.a.createElement("img",{className:"related-artist-img",src:t.images[2].url,alt:""}),n.a.createElement("div",{className:"related-artist-name"},t.name))}))))):null)}}]),a}(r.Component)),C=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).componentDidMount=function(){setTimeout(Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.callSpotifyApi();case 2:case"end":return e.stop()}}),e)}))),50)},r.callSpotifyApi=Object(l.a)(o.a.mark((function e(){var t,a,n,c,s,i,l,u,p,m,d,f,h,v,k,g,y,b,T;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.state.limit,a={},e.next=4,S.a.get("https://api.spotify.com/v1/me/top/artists?time_range=short_term&limit=".concat(t,"&offset=0"),{headers:{Authorization:"Bearer "+r.props.token,"Content-Type":"application/json"}});case 4:if(n=e.sent,5===(c=n.data.items).length){e.next=11;break}return e.next=9,S.a.get("https://api.spotify.com/v1/me/top/artists?time_range=medium_term&limit=5&offset=0",{headers:{Authorization:"Bearer "+r.props.token,"Content-Type":"application/json"}});case 9:n=e.sent,c=n.data.items;case 11:if(5===c.length){e.next=16;break}return e.next=14,S.a.get("https://api.spotify.com/v1/me/top/artists?time_range=long_term&limit=5&offset=0",{headers:{Authorization:"Bearer "+r.props.token,"Content-Type":"application/json"}});case 14:n=e.sent,c=n.data.items;case 16:if(5===c.length){e.next=68;break}return e.next=19,S.a.get("https://api.spotify.com/v1/me/playlists",{headers:{Authorization:"Bearer "+r.props.token,"Content-Type":"application/json"}});case 19:n=e.sent,s=n.data.items.map((function(e){return e.id})),i=0,l=Object(E.a)(s),e.prev=23,l.s();case 25:if((u=l.n()).done){e.next=55;break}if(p=u.value,!(i>=4)){e.next=29;break}return e.abrupt("break",55);case 29:return e.next=31,S.a.get("https://api.spotify.com/v1/playlists/".concat(p,"/tracks"),{headers:{Authorization:"Bearer "+r.props.token,"Content-Type":"application/json"}});case 31:m=e.sent,(d=m.data.items).sort((function(e,t){return t.added_at-e.added_at})),f=Object(E.a)(d),e.prev=35,f.s();case 37:if((h=f.n()).done){e.next=45;break}if(v=h.value,!(i>4)){e.next=41;break}return e.abrupt("break",45);case 41:a[i]={data:v.track,type:"track"},i++;case 43:e.next=37;break;case 45:e.next=50;break;case 47:e.prev=47,e.t0=e.catch(35),f.e(e.t0);case 50:return e.prev=50,f.f(),e.finish(50);case 53:e.next=25;break;case 55:e.next=60;break;case 57:e.prev=57,e.t1=e.catch(23),l.e(e.t1);case 60:return e.prev=60,l.f(),e.finish(60);case 63:return a={0:{data:c[0],type:"track"},1:{data:c[1],type:"track"},2:{data:c[2],type:"track"},3:{data:c[3],type:"track"},4:{data:c[4],type:"track"}},r.setState({artists:c,preferences:a}),e.next=67,r.callForRecommend();case 67:return e.abrupt("return");case 68:a={0:{data:c[0],type:"artist"},1:{data:c[1],type:"artist"},2:{data:c[2],type:"artist"},3:{data:c[3],type:"artist"},4:{data:c[4],type:"artist"}},k={},g=0;case 71:if(!(g<5)){e.next=81;break}return y=a[g].data.id,e.next=75,S.a.get("https://api.spotify.com/v1/artists/".concat(y,"/related-artists"),{headers:{Authorization:"Bearer "+r.props.token,"Content-Type":"application/json"}});case 75:b=e.sent,T=b.data.artists,k[g]=T;case 78:g++,e.next=71;break;case 81:return r.setState({artists:c,preferences:a,relatedArtists:k}),e.next=84,r.callForRecommend();case 84:return e.abrupt("return");case 85:case"end":return e.stop()}}),e,null,[[23,57,60,63],[35,47,50,53]])}))),r.callForRecommend=Object(l.a)(o.a.mark((function e(){var t,a,n,c,s,i,l,u,p,m,d,f,h,v,k,g,y,E,T,w,N,x;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=r.state,a=t.preferences,n=t.select,c=t.tracks,s=t.sortByNew,i=[],n.forEach((function(e,t){n[t]&&i.push(c[t])})),l=new Array(50).fill(!1),u=0;u<i.length;u++)l[u]=!0;if(0!==(p=50-i.length)){e.next=8;break}return e.abrupt("return");case 8:for(m="limit=".concat(s?85:50,"&"),d="seed_artists=",f="seed_tracks=",h=!1,v=0;v<5;v++)null!=a[v].data&&(h=!0,"artist"===a[v].type?(d+=a[v].data.id,v<=3&&(d+=",")):"track"===a[v].type&&(f+=a[v].data.id,v<=3&&(f+=",")));return"seed_artists="!==d&&(m+=d),"seed_tracks="!==f&&(m+="&",m+=f),k="https://api.spotify.com/v1/recommendations?"+m,h||(k="https://api.spotify.com/v1/recommendations?limit=".concat(p,"&seed_genres=pop")),e.next=19,S.a.get(k,{headers:{Authorization:"Bearer "+r.props.token,"Content-Type":"application/json"}});case 19:for(g=e.sent,y=[],E=0;E<5;E++)y.push(a[E].data.name);for(g.data.tracks.sort((function(e,t){return t.popularity-e.popularity})),T=function(e){var t=g.data.tracks[e];i.some((function(e){return 0===e.name.localeCompare(t.name)}))||i.push(t),s&&y.indexOf(t.artists[0].name)<0&&i.push(t)},w=0;w<p;w++)T(w);N=Object(b.a)(g.data.tracks).sort((function(e,t){return y.indexOf(e.artists[0].name)<0&&y.indexOf(t.artists[0].name)<0||y.indexOf(e.artists[0].name)>=0&&y.indexOf(t.artists[0].name)>=0?e.popularity>t.popularity?-1:1:y.indexOf(e.artists[0].name)>=0?1:-1})),x=i.map((function(e){return e.uri})),r.setState({tracks:i,select:l,tracklisturi:x,newartisttracks:N});case 28:case"end":return e.stop()}}),e)}))),r.updateSelectedTrack=function(e){r.setState({selectedTrack:e})},r.updateSearchSeed=function(e){r.setState({searchSeed:e})},r.updateHoveredObj=function(e,t){if(e){e.preventDefault();var a={sample_uri:e.currentTarget.dataset.sampleUri,img:e.currentTarget.children[0].children[1].currentSrc,trackName:e.currentTarget.children[0].children[2].children[0].textContent,artistName:e.currentTarget.children[0].children[2].children[1].textContent};r.setState({hovering:a,sample_uri:a.sample_uri,hoverIndex:t})}else r.setState({hovering:null,sample_uri:null,hoverIndex:null})},r.updateTimeRange=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,c,s,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.state,n=a.type,c=a.limit,e.next=3,S.a.get("https://api.spotify.com/v1/me/top/".concat(n,"?time_range=").concat(t,"&limit=").concat(c,"&offset=0"),{headers:{Authorization:"Bearer "+r.props.token,"Content-Type":"application/json"}});case 3:s=e.sent,i=s.data.items,l={0:{data:i[0],type:"artist"},1:{data:i[1],type:"artist"},2:{data:i[2],type:"artist"},3:{data:i[3],type:"artist"},4:{data:i[4],type:"artist"}},r.setState({artists:i,time_range:t,preferences:l}),r.callForRecommend();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.updateHoverUri=function(e){r.setState({sample_uri:e})},r.updatePreference=function(){var e=Object(l.a)(o.a.mark((function e(t,a){var n,c,s,i,l,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==r.state.changingPreferenceIndex){e.next=2;break}return e.abrupt("return");case 2:n=0;case 3:if(!(n<5)){e.next=9;break}if(t.name!==r.state.preferences[n].data.name){e.next=6;break}return e.abrupt("return");case 6:n++,e.next=3;break;case 9:return c=r.state.changingPreferenceIndex,(s=Object(y.a)({},r.state.preferences))[c]={data:t,type:a},e.next=14,S.a.get("https://api.spotify.com/v1/artists/".concat(t.id,"/related-artists"),{headers:{Authorization:"Bearer "+r.props.token,"Content-Type":"application/json"}});case 14:i=e.sent,l=i.data.artists,u=Object(y.a)(Object(y.a)({},r.state.relatedArtists),{},Object(g.a)({},r.state.changingPreferenceIndex,l)),r.setState((function(e){return{preferences:s,relatedArtists:u,currentRelatedArtists:l}})),r.callForRecommend();case 19:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),r.setupPreference=function(e){var t=r.state,a=t.changingPreferenceIndex,n=t.relatedArtists;if(e!==a){var c=n[e];r.setState({changingPreferenceIndex:e,currentRelatedArtists:c})}},r.playSpecificArtist=function(e,t){S.a.put("https://api.spotify.com/v1/me/player/play",{context_uri:e},{headers:{Authorization:"Bearer "+r.props.token,"Content-Type":"application/json"}}),r.setState({currentPlaying:t})},r.playSpecificSong=function(e,t){S.a.put("https://api.spotify.com/v1/me/player/play",{uris:[e]},{headers:{Authorization:"Bearer "+r.props.token,"Content-Type":"application/json"}}),r.setState({currentPlaying:t})},r.queueUpSongs=function(){S.a.put("https://api.spotify.com/v1/me/player/play",{uris:r.state.tracklisturi,offset:{position:0}},{headers:{Authorization:"Bearer "+r.props.token,"Content-Type":"application/json"}})},r.lockSpecificTrack=function(e){var t=Object(b.a)(r.state.select);t[e]=!t[e],r.setState({select:t})},r.updateMenu=function(){r.setState((function(e){return{openingMenu:!e.openingMenu}}))},r.updateSortByNew=function(){r.setState((function(e){return{sortByNew:!e.sortByNew}}))},r.state={type:"artists",time_range:"short_term",limit:5,select:new Array(50).fill(!1),artists:null,tracks:null,newartisttracks:null,recSeed:null,thumbnailOn:!0,selectedTrack:null,searchSeed:"",hovering:null,hoverIndex:null,changingPreferenceIndex:null,itemToSwap:null,clickToSelect:!1,openingMenu:!0,showThumb:!1,currentRelatedArtists:null,sortByNew:!1,tracklisturi:[],preferences:{0:null,1:null,2:null,3:null,4:null},relatedArtists:{0:null,1:null,2:null,3:null,4:null}},r}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.token,r=t.deviceId,c=t.changePlayerSettings,s=this.state,i=s.tracks,o=s.newartisttracks,l=s.hovering,u=s.preferences,p=s.sample_uri,m=s.changingPreferenceIndex,d=s.select,f=s.hoverIndex,h=(s.currentPlaying,s.sortByNew),v=s.tracklisturi,k=s.openingMenu,g=(s.showThumb,s.updateSortByNew,s.currentRelatedArtists),y=s.relatedArtists;return n.a.createElement("div",{className:"app-container"},n.a.createElement("div",{className:"darken",style:{background:k?"":"rgba(0, 0, 0, 0.8)",zIndex:k?-1:3},onClick:function(t){return e.setState({openingMenu:!0})}}),n.a.createElement(x,{preferences:u,changingPreferenceIndex:m,updateMenu:this.updateMenu,setupPreference:this.setupPreference,updatePreference:this.updatePreference,playSpecificArtist:this.playSpecificArtist,currentRelatedArtists:g,relatedArtists:y,token:a,openingMenu:k}),k?null:n.a.createElement(N,{select:d,sortByNew:h,token:a,changePlayerSettings:c,updateMenu:this.updateMenu,lockSpecificTrack:this.lockSpecificTrack,updateTimeRange:this.updateTimeRange,updateHoveredObj:this.updateHoveredObj,updateSelectedTrack:this.updateSelectedTrack,playSpecificSong:this.playSpecificSong,updatePreference:this.updatePreference,callForRecommend:this.callForRecommend,queueUpSongs:this.queueUpSongs,updateSortByNew:this.updateSortByNew,tracks:i,newartisttracks:o,deviceId:r,hovering:l,hoverIndex:f,sampleUri:p,tracklisturi:v}))}}]),a}(r.Component),O=(a(81),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).millisToMinutesAndSeconds=function(e){var t=Math.floor(e/6e4),a=Math.floor(Math.floor(e%6e4)/1e3);return t+":"+(a<10?"0":"")+a},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.changePlayerSettings,a=e.changeCurrentTrackTime,r=e.changeCurrentVolume,c=e.pauseTimer,s=e.restartTimer,i=e.curTrack,o=e.curVolume,l=e.playing,u=e.trackTimer;return i?n.a.createElement("div",{className:"cur-track-container"},n.a.createElement("div",{className:"top-container"},n.a.createElement("div",{className:"cur-track-img-container"},n.a.createElement("img",{className:"cur-track-img",src:i.track_window.current_track.album.images[0].url,alt:""})),n.a.createElement("div",{className:"cur-track-name"}," ",i.track_window.current_track.name," "),n.a.createElement("div",{className:"cur-artist-name"}," ",i.track_window.current_track.artists[0].name)),n.a.createElement("div",{className:"button-bar"},n.a.createElement("div",{className:"control-btn prev-track fa-2x",onClick:function(){return t("prev")}}),n.a.createElement("button",{className:"control-btn toggle-button",onClick:function(){return t("toggle")}},l?n.a.createElement("div",{onClick:function(e){return c()},className:"cur-pause","aria-hidden":"true"}):n.a.createElement("div",{onClick:function(e){return s()},className:"cur-play","aria-hidden":"true"})),n.a.createElement("div",{className:"control-btn next-track",onClick:function(){return t("next")}})),n.a.createElement("div",{className:"song-slider"},n.a.createElement("span",{className:"song-start-time"}," ",this.millisToMinutesAndSeconds(u)," "),n.a.createElement("input",{onChange:function(e){e.preventDefault(),a(e.target.value)},type:"range",className:"slider",min:"0",max:"".concat(i.duration),step:"1000",value:"".concat(u)}),n.a.createElement("span",{className:"song-end-time"}," ",this.millisToMinutesAndSeconds(i.duration)," ")),n.a.createElement("div",{className:"volume-slider"},n.a.createElement("span",{className:"song-star"}),n.a.createElement("input",{onChange:function(e){e.preventDefault(),r(e.target.value)},type:"range",className:"vol-slider",min:"0",max:"1",step:"0.025",value:"".concat(o)}),n.a.createElement("span",{className:"song-end-time"}," ",this.millisToMinutesAndSeconds(i.duration)," "))):n.a.createElement("div",null)}}]),a}(r.Component)),j=(a(82),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"navbar-container"},n.a.createElement("div",{className:"logo-name"}," SPOTLUCK "))}}]),a}(r.Component)),A=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).componentDidMount=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.location.hash,!(a=k.a.parse(t).access_token)){e.next=7;break}return e.next=5,r.props.validateLogin(!0,a);case 5:e.next=8;break;case 7:"?error=access_denied"===window.location.search&&r.setState({readyToRedirect:!0});case 8:case"end":return e.stop()}}),e)}))),r.state={readyToRedirect:!1},r}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.token,a=e.deviceId,r=e.changePlayerSettings,c=e.pauseTimer,s=e.restartTimer,i=e.curTrack,o=e.curVolume,l=e.changeCurrentTrackTime,u=e.changeCurrentVolume,p=e.playing,m=e.trackTimer;return this.state.readyToRedirect?(this.setState({readyToRedirect:!1}),n.a.createElement(h.a,{to:"/"})):n.a.createElement("div",{className:"root-container"},n.a.createElement(j,null),n.a.createElement(C,{changePlayerSettings:r,deviceId:a,token:t}),n.a.createElement(O,{changeCurrentTrackTime:l,changeCurrentVolume:u,playing:p,curTrack:i,curVolume:o,trackTimer:m,changePlayerSettings:r,pauseTimer:c,restartTimer:s}))}}]),a}(r.Component),_=(a(88),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e="streaming user-read-email user-read-private user-top-read user-modify-playback-state";return n.a.createElement("div",{className:"agreement-container"},n.a.createElement("div",{className:"sliding-background"}),n.a.createElement("div",{className:"agreement-header"},n.a.createElement("div",{className:"agreement-modal"},n.a.createElement("div",{className:"agreement-description"},n.a.createElement("h3",{className:"agreement-title"}," Spotluck "),n.a.createElement("div",{className:"app-description"}," A new way to discover music. Powered by you. ")),n.a.createElement("div",{className:"agreement-button"},n.a.createElement("a",{className:"agreement-link",href:"https://accounts.spotify.com/authorize"+"?client_id=".concat("85844184835545fe8096eb6a8d2934b8")+"&response_type=token&redirect_uri=http://danieljaeim.com/spotluck/#/landing"+"&scope=".concat(encodeURIComponent(e))},"Login with Spotify"))),n.a.createElement("div",{className:"spotluck-preview"},n.a.createElement("div",{className:"preview-div"}))))}}]),a}(r.Component)),I=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).checkPlayerInterval=function(){null!=r.state.token&&(r.setState({loggedIn:!0}),r.playerCheckInterval=setInterval((function(){return r.checkForPlayer()}),1e3))},r.checkForPlayer=function(){var e=r.state,t=e.token;e.curTrack;null!==window.Spotify&&(clearInterval(r.playerCheckInterval),r.player=new window.Spotify.Player({name:"Daniel Web Spotify Player",getOAuthToken:function(e){e(t)},volume:.3}),r.player.on("initialization_error",(function(e){console.error(e)})),r.player.on("authentication_error",(function(e){r.setState({loggedIn:!1})})),r.player.on("account_error",(function(e){console.error(e)})),r.player.on("playback_error",(function(e){console.error(e)})),r.player.on("player_state_changed",(function(e){console.log("state changed"),console.log(r.state.curTrack),r.state.curTrack&&r.state.curTrack.duration!==e.duration&&r.newSong(),r.setState({curTrack:e})})),r.player.on("ready",function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.device_id,console.log("Let the music play on!"),r.player.setVolume(r.state.curVolume),e.next=5,r.setState({deviceId:a,premium:!0});case 5:r.transferPlaybackHere();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.player.connect().then((function(e){e&&(r.changeCurrentTrackTime(0),r.transferPlaybackHere(),console.log("The Web Player successfully connected to Spotify!"))})))},r.changePlayerSettings=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="pause"===e.t0?3:"toggle"===e.t0?6:"next"===e.t0?9:"previous"===e.t0?12:15;break;case 3:return r.setState({playing:!1}),r.player.pause(),e.abrupt("break",15);case 6:return r.setState((function(e){return{playing:!e.playing}})),r.player.togglePlay(),e.abrupt("break",15);case 9:return r.player.nextTrack(),r.newSong(),e.abrupt("break",15);case 12:return r.player.previousTrack(),r.newSong(),e.abrupt("break",15);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.newSong=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,clearInterval(r.state.currentTimer);case 2:r.startTimer(0);case 3:case"end":return e.stop()}}),e)}))),r.pauseTimer=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.state.currentTimer,e.next=3,clearInterval(t);case 3:case"end":return e.stop()}}),e)}))),r.restartTimer=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=setInterval((function(e){r.setState((function(e){return{trackTimer:e.trackTimer+1e3}}))}),1e3),r.setState({currentTimer:t});case 2:case"end":return e.stop()}}),e)}))),r.startTimer=function(e){r.setState({trackTimer:+e});var t=setInterval((function(e){r.setState((function(e){return{trackTimer:e.trackTimer+1e3}}))}),1e3);r.setState({currentTimer:t})},r.changeCurrentTrackTime=function(e){0==r.state.trackTimer?(r.startTimer(e),r.player.seek(e)):(r.setState({trackTimer:+e}),r.player.seek(e))},r.changeCurrentVolume=function(e){r.setState({curVolume:e}),r.player.setVolume(e)},r.getPlayerState=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.player.getCurrentState);case 1:case"end":return e.stop()}}),e)}))),r.validateLogIn=function(){var e=Object(l.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,r.setState({token:a});case 3:r.checkPlayerInterval();case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),r.state={loggedIn:!1,token:null,deviceId:"",position:0,duration:0,playing:!0,premium:!0,redirect:!1,curTrack:null,trackTimer:0,currentTimer:null,curVolume:.05},r.playerCheckInterval=null,r}return Object(p.a)(a,[{key:"transferPlaybackHere",value:function(){var e=this.state,t=e.deviceId,a=e.token;fetch("https://api.spotify.com/v1/me/player",{method:"PUT",headers:{authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({device_ids:[t],play:!0})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loggedIn,r=t.redirect,c=t.token,s=t.deviceId,i=t.curTrack,o=t.curVolume,l=t.playing,u=t.trackTimer;return n.a.createElement(f.a,null,n.a.createElement(h.d,null,n.a.createElement(h.b,{exact:!0,path:"/landing",render:function(t){return n.a.createElement(A,Object.assign({},t,{changeCurrentTrackTime:e.changeCurrentTrackTime,changeCurrentVolume:e.changeCurrentVolume,pauseTimer:e.pauseTimer,restartTimer:e.restartTimer,curTrack:i,curVolume:o,playing:l,changePlayerSettings:e.changePlayerSettings,deviceId:s,token:c,redirect:r,loggedIn:a,validateLogin:e.validateLogIn,trackTimer:u}))}}),n.a.createElement(h.b,{exact:!0,path:"/",render:function(e){return n.a.createElement(_,e)}})))}}]),a}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.4f61bb04.chunk.js.map